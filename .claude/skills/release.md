# Release Skill

自动化版本发布流程，生成版本文档并更新项目配置。

## 使用方法

```bash
/release <version>
```

例如：

```bash
/release 1.0.0
/release 1.1.0
```

## 执行步骤

当用户调用此 skill 时，你应该按照以下步骤执行：

### 1. 验证版本号格式

- 检查版本号是否符合语义化版本规范（如 1.0.0、1.2.3）
- 如果版本号格式不正确，提示用户并退出

### 2. 读取项目信息

读取以下文件以了解项目当前状态：

- `package.json` - 获取当前版本号
- `public/plugin.json` - 获取插件配置信息
- `CLAUDE.md` - 了解项目架构和功能特性
- `documents/introduce.md` - 获取现有的插件介绍内容（如果存在）

### 3. 生成版本更新文档

创建 `documents/updates/{version}.md` 文件，内容应包括：

**文档结构**：

```markdown
# Dev Translation {version} 版本更新

发布日期：{当前日期}

## 🎉 版本概述

[根据版本号类型描述：主版本/次版本/补丁版本]

## ✨ 新增功能

[列出新增的功能特性]

## 🔧 改进优化

[列出改进和优化项]

## 🐛 问题修复

[列出修复的问题]

## 🎨 界面设计

[描述界面相关的更新]

## ⌨️ 快捷操作

[描述快捷键和操作相关的更新]

## 🛠️ 技术特性

[描述技术架构相关的更新]

## 📦 使用场景

[描述新的使用场景]

## 🔧 系统要求

[列出系统要求的变化]

## 📝 已知限制

[列出已知的限制]

## 🚀 未来计划

[描述未来的开发计划]

---

感谢使用 Dev Translation！如有问题或建议，欢迎反馈。
```

**内容生成规则**：

- 对于首个正式版本（1.0.0），应该全面介绍所有核心功能
- 对于后续版本，重点描述相对于上一版本的变化
- 使用 emoji 图标增强可读性
- 保持专业且友好的语气
- 内容应该详细但不冗长

### 4. 更新插件介绍文档

更新或创建 `documents/introduce.md` 文件，内容应包括：

**文档结构**：

```markdown
# Dev Translation - 开发者翻译

[项目简介]

![Dev Translation](./image.png)

## 🌟 核心特性

[列出所有核心功能]

## 🎨 界面设计

[描述界面设计特点]

## 📖 使用方法

### 触发插件
[说明如何触发插件]

### 基本操作
[说明基本操作方法]

### 快捷键
[列出所有快捷键]

## 💡 使用场景

[列出典型使用场景]

## 🔧 系统要求

[列出系统要求]

## 📝 注意事项

[列出注意事项]

## 🚀 技术栈

[列出技术栈]

## 📦 版本历史

[列出所有版本及其主要更新]

## 🤝 反馈与支持

[说明反馈方式]

---

**Dev Translation** - 让翻译更高效，让开发更流畅
```

**内容生成规则**：

- 基于 CLAUDE.md 中的项目架构信息
- 基于 plugin.json 中的功能配置
- 在版本历史部分添加新版本记录
- 保持与版本更新文档的一致性

### 5. 更新版本号（可选）

询问用户是否需要更新以下文件中的版本号：

- `package.json` 中的 `version` 字段
- `public/plugin.json` 中的 `version` 字段（如果存在）

如果用户确认，则更新这些文件。

### 6. 生成发布检查清单

在完成文档生成后，输出一个发布检查清单：

```markdown
## 📋 发布检查清单

- [ ] 版本更新文档已生成：documents/updates/{version}.md
- [ ] 插件介绍文档已更新：documents/introduce.md
- [ ] package.json 版本号已更新（如果需要）
- [ ] plugin.json 版本号已更新（如果需要）
- [ ] 执行 `pnpm build` 构建生产版本
- [ ] 测试插件功能是否正常
- [ ] 检查文档中的链接和格式
- [ ] 准备发布到 uTools 插件中心
- [ ] 创建 Git tag：git tag v{version}
- [ ] 推送到远程仓库：git push origin v{version}
```

## 注意事项

1. **版本号规范**：遵循语义化版本规范（Semantic Versioning）
   - 主版本号（Major）：不兼容的 API 修改
   - 次版本号（Minor）：向下兼容的功能性新增
   - 修订号（Patch）：向下兼容的问题修正

2. **文档质量**：
   - 确保文档内容准确反映实际功能
   - 使用清晰的标题和结构
   - 添加适当的 emoji 图标增强可读性
   - 保持专业且友好的语气

3. **Markdown 格式**：
   - 标题前后应有空行（MD022）
   - 列表前后应有空行（MD032）
   - 使用一致的列表标记
   - 代码块使用正确的语言标识

4. **内容一致性**：
   - 版本更新文档和插件介绍文档应保持一致
   - 功能描述应与 CLAUDE.md 中的架构文档一致
   - 技术栈信息应与 package.json 一致

5. **用户交互**：
   - 在执行关键操作前询问用户确认
   - 提供清晰的进度反馈
   - 在完成后提供检查清单

## 示例

### 调用示例

```bash
/release 1.1.0
```

### 预期输出

1. 验证版本号格式 ✓
2. 读取项目信息 ✓
3. 生成版本更新文档 ✓
4. 更新插件介绍文档 ✓
5. 询问是否更新版本号
6. 输出发布检查清单

## 扩展功能

未来可以考虑添加：

- 自动从 Git 提交历史生成更新日志
- 自动检测功能变化并生成描述
- 支持多语言文档生成
- 自动创建 Git tag
- 自动生成 CHANGELOG.md
