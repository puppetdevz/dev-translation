# 开发者翻译插件 - 测试指南

## 开发环境已启动

开发服务器已成功启动：
- 地址：http://localhost:5173/
- 状态：运行中

## 如何在 uTools 中测试

### 1. 确保 uTools 已安装

如果还没有安装 uTools，请访问 https://www.u-tools.cn/ 下载安装。

### 2. 在 uTools 中加载开发插件

1. 打开 uTools（通常使用快捷键 `Alt + Space` 或 `Option + Space`）
2. 输入 "插件管理" 或 "plugin"
3. 点击右上角的 "开发者" 按钮
4. 点击 "添加开发插件"
5. 选择项目目录：`/Users/zhongyuming/codespace/projects/dev-translation`
6. uTools 会自动加载 `public/plugin.json` 配置

### 3. 测试功能

#### 测试 1：关键词触发

1. 打开 uTools
2. 输入 "翻译" 或 "translate" 或 "fanyi"
3. 应该看到 "开发者翻译" 插件出现在列表中
4. 按 Enter 进入插件

#### 测试 2：中译英

1. 在输入框中输入中文，例如："你好世界"
2. 观察语言指示器显示 "中 → 英"
3. 点击 "翻译" 按钮或按 Enter 键
4. 等待翻译结果
5. 验证结果包含：
   - 英文翻译
   - 美式音标（IPA 格式）
   - 多个英文释义
   - 多个英文例句

#### 测试 3：英译中

1. 清空输入框（点击 "清空" 按钮）
2. 输入英文，例如："Hello World"
3. 观察语言指示器显示 "英 → 中"
4. 点击 "翻译" 按钮或按 Enter 键
5. 等待翻译结果
6. 验证结果包含：
   - 中文翻译
   - 英文原文的美式音标
   - 多个英文释义（保持英文）
   - 多个英文例句（保持英文）

#### 测试 4：文本选择触发

1. 在任意应用中选中一段文本（中文或英文）
2. 打开 uTools
3. 应该看到 "翻译" 选项
4. 选择 "翻译"
5. 插件应自动填充选中的文本并开始翻译

#### 测试 5：快捷键

1. 在输入框中输入文本
2. 按 `Enter` 键 → 应触发翻译
3. 按 `Shift + Enter` → 应换行
4. 测试清空按钮功能

#### 测试 6：错误处理

1. 不输入任何内容，直接点击翻译 → 应显示 "请输入要翻译的内容"
2. 输入超过 5000 字符 → 应显示字数限制提示
3. 如果网络断开，应显示网络错误提示

#### 测试 7：UI 响应

1. 测试深色模式：
   - 在系统设置中切换深色/浅色模式
   - 验证插件界面正确适配
2. 测试加载状态：
   - 翻译时应显示加载动画和 "正在翻译中..." 提示
3. 测试复制功能：
   - 点击翻译结果卡片的 "复制" 按钮
   - 验证内容已复制到剪贴板
   - 应显示 "已复制到剪贴板" 通知

## 已实现的功能

✅ 插件配置（plugin.json）
✅ 路由集成（App.vue）
✅ 主组件（Translate/index.vue）
  - 状态管理
  - 语言检测（正则表达式）
  - AI Prompt 构建（中译英、英译中）
  - AI API 调用
  - 结果解析（多层容错）
  - 文本选择自动触发
✅ 输入区域组件（InputArea.vue）
  - 大文本输入框
  - 语言指示器
  - 字数统计
  - 清空按钮
  - 翻译按钮
  - 快捷键支持
✅ 结果展示组件（ResultDisplay.vue）
  - 加载状态
  - 错误状态
  - 结果卡片（翻译、音标、释义、例句）
  - 复制功能
✅ 快捷键提示组件（KeyboardShortcuts.vue）
✅ 深色模式支持
✅ 响应式布局

## 注意事项

### AI API 使用

本插件使用 uTools AI API（`window.utools.ai`），需要：
1. uTools 版本支持 AI 功能
2. 用户已配置 AI 服务（在 uTools 设置中）
3. 有可用的 AI 调用额度

### 音标准确性

音标由 AI 生成，可能存在以下情况：
- 音标格式可能不完全标准
- 某些专业术语的音标可能不准确
- 建议对关键词汇进行人工验证

### 性能优化建议

如果发现频繁调用 API，可以考虑：
1. 添加防抖（debounce）机制
2. 实现翻译结果缓存
3. 添加历史记录功能

## 构建生产版本

当测试完成后，可以构建生产版本：

```bash
pnpm build
```

构建产物将输出到 `dist/` 目录，可以打包成 `.upx` 文件发布到 uTools 插件市场。

## 问题排查

### 插件无法加载

1. 检查 `plugin.json` 格式是否正确
2. 确认开发服务器正在运行（http://localhost:5173/）
3. 在 uTools 开发者工具中查看错误日志

### 翻译失败

1. 检查浏览器控制台错误信息
2. 确认 uTools AI 服务已配置
3. 检查网络连接
4. 查看 AI API 调用额度

### 样式显示异常

1. 清除浏览器缓存
2. 重启 uTools
3. 检查 CSS 变量是否正确定义

## 后续优化方向

1. **历史记录功能**：使用 uTools DB API 存储翻译历史
2. **单词跟读功能**：集成 TTS API
3. **AI 润色功能**：提供文本优化建议
4. **缓存机制**：缓存常用翻译结果
5. **快捷键自定义**：允许用户自定义快捷键
6. **多语言支持**：扩展到更多语言对
7. **批量翻译**：支持一次翻译多个词条
8. **导出功能**：导出翻译结果为文件

## 反馈和支持

如有问题或建议，请在项目中提交 Issue。
